---
########################### Catalysts ################################
#                                                                    #
# This file contains all of the variables that need to be configured #
# for a working SIMP system.                                         #
#                                                                    #
# The items that are arrays or hashes should stay in that form since #
# the SIMP code now validates option types whenever reasonable.      #
#                                                                    #
# For more information on how to use Hiera, see:                     #
#   * http://docs.puppetlabs.com/hiera/latest/puppet.html            #
#   * http://docs.puppetlabs.com/hiera/latest/complete_example.html  #
#                                                                    #
######################################################################

# The client networks for your systems. If you need this to be more
# (or less) restrictive for a given class, you can override it
# elsewhere in Hiera.
simp_options::trusted_nets:
  - '1.2.3.4/24'
  - '5.6.7.8/16'

# SELinux is good
#
# Not all modules are compatible with SELinux in enforcing mode but
# the core SIMP modules are. You should not take this below permissive
# unless it is truly necessary.
simp_options::selinux: false

# Whether or not to use auditd across the infrastructure, unless overwritten.
simp_options::auditd: false

# Whether or not to use iptables across the infrastructure, unless overwritten.
# If there is code that calls the IPTables native type directly, this
# option may not function properly. We are looking into solutions for
# this issue.
simp_options::firewall: false

# Enable FIPS-140-2 compliance
simp_options::fips: false

# Enable to use HAVEGEd, an entropy generation daemon.
# This is useful in SIMP if running in a VM that may run low on entropy during normal usage.
simp_options::haveged: false

simp_options::ipsec: false

# Enable ipv6 across the infrastructure, unless overwritten.
simp_options::ipv6: false

# Rotate logs across the infrastructure, unless overwritten.
simp_options::logrotate: false

# Manage pam and pam integrations across the infrastructure, unless overwritten.
simp_options::pam: false

# Distribute keys and certs using `pki` and certs from keydist
# true, false, or 'simp'
simp_options::pki: false

# Enable LDAP integration across the infrastructure, unless overwritten.
simp_options::ldap: false

# Enable sssd across the infrastructure, unless overwritten.
simp_options::sssd: false

simp_options::syslog: false
simp_options::kerberos: false
simp_options::tcpwrappers: false
simp_options::stunnel: false


# === Time Options ===
simp_options::ntpd::servers:
  - time.nist.gov

# === DNS Options ===
# The DNS domain search string.
# Order matters, so be careful to put these in the appropriate order for your environment!
simp_options::dns::search:
  - 'your.domain'
# The DNS servers for your nodes
simp_options::dns::servers:
  - '8.8.8.8'

# === Syslog Options ===
#
simp_options::log_servers:
  - "%{hiera('puppet::server')}"
simp_options::failover_log_servers:

# === Puppet Options ===
# These are used in several places throughout the code and can be used
# to easily shift your server values between systems as appropriate.
simp_options::puppet::server: 'puppet.your.domain'
simp_options::puppet::ca: "%{hiera('puppet::server')}"
simp_options::puppet::ca_port: 8141

puppetdb::server: "%{hiera('puppet::server')}"
puppetdb::port: 8139

# In case someone decides to create a master that uses PuppetDB.
puppetdb::master::config::puppetdb_server: "%{hiera('puppetdb::server')}"
puppetdb::master::config::puppetdb_port: "%{hiera('puppetdb::port')}"

# === LDAP Options ===
# Various LDAP-related settings. You *really* want to make sure that
# these are set since multiple modules use them.
#
# Remember that you can't include hiera arrays or hashes later on,
# only string values!
#
# If you disable this, then modules will not attempt to use LDAP where
# possible.
simp_options::ldap::base_dn:   'dc=your,dc=domain'
simp_options::ldap::bind_dn:   "cn=hostAuth,ou=Hosts,%{hiera('ldap::base_dn')}"
simp_options::ldap::bind_pw:   'your bind password'
simp_options::ldap::bind_hash: 'Generate this with slappasswd!'
simp_options::ldap::sync_dn:   "cn=LDAPSync,ou=Hosts,%{hiera('ldap::base_dn')}"
simp_options::ldap::sync_pw:   'your sync password'
simp_options::ldap::sync_hash: 'Generate this with slappasswd!'
simp_options::ldap::root_dn:   "cn=LDAPAdmin,ou=People,%{hiera('ldap::base_dn')}"
simp_options::ldap::root_hash: 'Generate this with slappasswd!'
simp_options::ldap::master:    "ldap://%{hiera('puppet::server')}"
simp_options::ldap::uri:
  - "ldap://%{hiera('puppet::server')}"

# === Rsync Options ===
# Several modules use rsync as a means of pulling down large
# collections of files. This provides a single point of configuration
# for the system defaults.
#
# Individual modules can be overridden as required
#
# By default the rsync server is  127.0.0.1, with an stunnel
# connecting to the puppet server (default seen below).
rsync::base: "/var/simp/rsync/%{facts.os.name}/%{facts.os.release.major}"
simp_options::rsync::server: '127.0.0.1'
simp_options::rsync::timeout: 1

# === PKI Options ===
#
simp_options::pki::source:
  - /etc/pki/simp

# === OpenSSL Options ===
# Cipher suite to be set across the infrastructure, unless overwritten.
simp_options::openssl::cipher_suite:
  - DEFAULT
  - !MEDIUM
